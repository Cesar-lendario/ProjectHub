<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Meta tags para prevenir cache -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>TaskMeet: Gerenciamento Profissional de Projetos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      // Configuração do Tailwind CDN para suportar dark mode
      tailwind.config = {
        darkMode: 'class',
      }
      
      // Forçar reload de assets quando detectar problemas de carregamento
      window.CACHE_VERSION = '2025.11.30.v1';
      console.log('[Cache] Versão:', window.CACHE_VERSION);
      
      // Detectar problemas de carregamento e forçar reload
      let loadingStartTime = Date.now();
      let loadingCheckInterval = setInterval(function() {
        let elapsed = Date.now() - loadingStartTime;
        // Se demorar mais de 20 segundos para carregar, algo está errado
        if (elapsed > 20000) {
          console.warn('[Cache] ⚠️ Carregamento demorou mais de 20s, limpando cache e recarregando...');
          clearInterval(loadingCheckInterval);
          // Limpar cache e recarregar (apenas uma vez)
          if (!sessionStorage.getItem('reload_attempted')) {
            sessionStorage.setItem('reload_attempted', 'true');
            window.location.reload(true);
          }
        }
      }, 5000);
      
      // Limpar flag quando carregar com sucesso
      window.addEventListener('load', function() {
        clearInterval(loadingCheckInterval);
        sessionStorage.removeItem('reload_attempted');
        console.log('[Cache] ✅ Página carregada com sucesso');
      });
    </script>
  <!-- Importmap removido - Vite já resolve dependências do node_modules -->
  <!-- Se precisar usar CDN, descomente e ajuste conforme necessário -->
  <!--
  <script type="importmap">
  {
    "imports": {
      "recharts": "https://aistudiocdn.com/recharts@^3.3.0",
      "@google/genai": "https://aistudiocdn.com/@google/genai@^1.26.0",
      "@supabase/supabase-js": "https://aistudiocdn.com/@supabase/supabase-js@^2.45.0",
      "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
      "react": "https://aistudiocdn.com/react@^19.2.0",
      "react/": "https://aistudiocdn.com/react@^19.2.0/",
      "marked": "https://aistudiocdn.com/marked@^16.4.1",
      "uuid": "https://aistudiocdn.com/uuid@^13.0.0"
    }
  }
  </script>
  -->
</head>
  <body>
    <div id="root"></div>
    <script type="module" src="./index.tsx"></script>
  </body>
</html>